Metadata-Version: 2.4
Name: roleperm
Version: 0.2.0
Summary: Lightweight, JSON-backed role & permission enforcement for Python desktop apps (stdlib-only).
Author: roleperm contributors
License: MIT
Keywords: roles,permissions,auth,tkinter,json
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Operating System :: OS Independent
Requires-Python: >=3.9
Description-Content-Type: text/markdown
License-File: LICENSE
Dynamic: license-file

# roleperm

`roleperm` is a **stdlib-only**, JSON-backed role & permission library for Python desktop apps.

- Login with **role name + password** (Tkinter popup optional)
- Enforce access with decorators that raise `PermissionError`
- Store roles in `roles.json`
- Store per-function permissions in **separate** `permissions.json`
- Password hashing uses **PBKDF2-HMAC-SHA256** (`hashlib.pbkdf2_hmac`)

## Install (editable)
```bash
pip install -e .
```

## Quick start
```python
import roleperm as rp

# bootstrap roles
rp.add_role("cashier", 1, "cash123")
rp.add_role("admin", 2, "admin123")

# optional login UI
rp.login(title="My App Login")

@rp.role_required(2)
def admin_hard_rule():
    print("Only role_id=2 can run this")

@rp.permission_key("view_stock", label="View Stock")
@rp.permission_required("view_stock")
def view_stock():
    print("Allowed roles are configurable in permissions.json")

view_stock()
```

## Admin panel (Tkinter)
`open_admin_panel()` opens a small tabbed UI:

- **Roles**: add/edit/delete roles
- **Permissions**: pick a registered permission key and toggle allowed roles

```python
import roleperm as rp

rp.open_admin_panel(
    roles_file="roles.json",
    permissions_file="permissions.json",
    manager_role_ids=None,           # None = any valid login may manage
    require_reauth=True              # prompts for password again
)
```

## Defaults
- `permission_required()` is **default-deny** when a key is missing from `permissions.json`.
  You can override with `default_allow=True` per decorator call.
